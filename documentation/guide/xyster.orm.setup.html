<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>9.2. Setting Up</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Programmer's Reference Guide">
<link rel="up" href="xyster.orm.html" title="Chapter 9. Xyster_Orm">
<link rel="prev" href="xyster.orm.html" title="Chapter 9. Xyster_Orm">
<link rel="next" href="xyster.orm.mapper.html" title="9.3. Xyster_Orm_Mapper">
<link rel="chapter" href="introduction.html" title="Chapter 1. Introduction to Xyster Framework">
<link rel="chapter" href="xyster.acl.html" title="Chapter 2. Xyster_Acl">
<link rel="chapter" href="xyster.collection.html" title="Chapter 3. Xyster_Collection">
<link rel="chapter" href="xyster.controller.html" title="Chapter 4. Xyster_Controller">
<link rel="chapter" href="xyster.data.html" title="Chapter 5. Xyster_Data">
<link rel="chapter" href="xyster.date.html" title="Chapter 6. Xyster_Date">
<link rel="chapter" href="xyster.enum.html" title="Chapter 7. Xyster_Enum">
<link rel="chapter" href="xyster.filter.html" title="Chapter 8. Xyster_Filter">
<link rel="chapter" href="xyster.orm.html" title="Chapter 9. Xyster_Orm">
<link rel="chapter" href="xyster.type.html" title="Chapter 10. Xyster_Type">
<link rel="chapter" href="xyster.validate.html" title="Chapter 11. Xyster_Validate">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">9.2. Setting Up</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="xyster.orm.html">Prev</a> </td>
<th width="60%" align="center">Chapter 9. Xyster_Orm</th>
<td width="20%" align="right"> <a accesskey="n" href="xyster.orm.mapper.html">Next</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="xyster.orm.setup"></a>9.2. Setting Up</h2></div></div></div>
<p>The system requires little set-up. Let’s declare three classes.</p>
<pre class="programlisting">&lt;?php
class Person extends Xyster_Orm_Entity
{
}
class PersonSet extends Xyster_Orm_Set
{
}</pre>
<p>Those are the entity and the entity set. Below is the mapper class. Since the mapper will connect to a SQL database, we can just extend from <code class="classname">Xyster_Orm_Mapper</code>. To see how to set up your database connection, see the Xyster_Orm_Mapper section below.</p>
<pre class="programlisting">&lt;?php
class PersonMapper extends Xyster_Orm_Mapper
{
    protected $_domain = 'myDb'; // the 'domain' associated with the back-end
}</pre>
<p>And that's it. Everything else about this entity is determined automagically: table, primary key, and columns. Let’s also specify a cache lifetime and an index.</p>
<pre class="programlisting">&lt;?php
class PersonMapper extends Xyster_Orm_Mapper
{
    protected $_domain = 'myDb';
    protected $_table = 'person';
    protected $_lifetime = 90;
    protected $_index = array('name_index' =&gt; array('name'));
}</pre>
<p>The table is by default the "underscore case" of the entity class name, so "ExampleTable" would be "example_table". The primary key is looked up from the table metadata in the data store. The column names are the camel case of the fields in the data store. They are looked up for the table and cached. For example, if "example_table" had "column_one", "column_two", "and_column_three", the columns array should contain "columnOne", "columnTwo", "andColumnThree". The lifetime property should be a number in seconds to cache entities in the secondary cache (see the Secondary Cache heading under Xyster_Orm). The index is used to cache entities by a key/value pair. In our example, we expect the "name" to be unique.</p>
<p>If for some reason you need to change how a mapper translates column names, or gets an entity set, these and other methods can be overwritten. See the Xyster_Orm_Mapper API for more information.</p>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="xyster.orm.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="xyster.orm.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="xyster.orm.mapper.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 9. Xyster_Orm </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 9.3. Xyster_Orm_Mapper</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
