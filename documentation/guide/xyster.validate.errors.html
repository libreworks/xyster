<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>11.2. Error Notification</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Programmer's Reference Guide">
<link rel="up" href="xyster.validate.html" title="Chapter 11. Xyster_Validate">
<link rel="prev" href="xyster.validate.html" title="Chapter 11. Xyster_Validate">
<link rel="chapter" href="introduction.html" title="Chapter 1. Introduction to Xyster Framework">
<link rel="chapter" href="xyster.acl.html" title="Chapter 2. Xyster_Acl">
<link rel="chapter" href="xyster.collection.html" title="Chapter 3. Xyster_Collection">
<link rel="chapter" href="xyster.controller.html" title="Chapter 4. Xyster_Controller">
<link rel="chapter" href="xyster.data.html" title="Chapter 5. Xyster_Data">
<link rel="chapter" href="xyster.date.html" title="Chapter 6. Xyster_Date">
<link rel="chapter" href="xyster.enum.html" title="Chapter 7. Xyster_Enum">
<link rel="chapter" href="xyster.filter.html" title="Chapter 8. Xyster_Filter">
<link rel="chapter" href="xyster.orm.html" title="Chapter 9. Xyster_Orm">
<link rel="chapter" href="xyster.type.html" title="Chapter 10. Xyster_Type">
<link rel="chapter" href="xyster.validate.html" title="Chapter 11. Xyster_Validate">
<link rel="subsection" href="xyster.validate.errors.html#xyster.validate.errors.example" title="11.2.1. Example of Use">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">11.2. Error Notification</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="xyster.validate.html">Prev</a> </td>
<th width="60%" align="center">Chapter 11. Xyster_Validate</th>
<td width="20%" align="right"> </td>
</tr>
</table></div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="xyster.validate.errors"></a>11.2. Error Notification</h2></div></div></div>
<p>The <code class="classname">Xyster_Validate_Errors</code> class is a 
            notification object.  It is responsible for collecting the messages
            returned by a <code class="classname">Zend_Validate</code> class.  It implements
            <code class="interfacename">Xyster_Collection_Interface</code> so you
            can iterate over it and count the elements inside.</p>
<p>Each message is stored in the set as a <code class="classname">Xyster_Validate_Error</code>
            object, containing the message and the name of the field to which the
            message applies.</p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="xyster.validate.errors.example"></a>11.2.1. Example of Use</h3></div></div></div>
<p>The notification object can accept either a <code class="classname">Zend_Filter_Input</code>
                or a <code class="interfacename">Zend_Validate_Interface</code> that
                will be used to collect messages.</p>
<p>Here is an example with a single <code class="interfacename">Zend_Validate_Interface</code>
                object.</p>
<pre class="programlisting">&lt;?php
require_once 'Zend/Validate/EmailAddress.php';
require_once 'Xyster/Validate/Errors.php';

$fieldName = 'email';
$errors = new Xyster_Validate_Errors();
$validator = new Zend_Validate_EmailAddress();

$email = $values[ $fieldName ];

if ($validator-&gt;isValid($email)) {
    // email appears to be valid
} else {
    // email is invalid; get messages
    $errors-&gt;addValidateMessages($validator, $fieldName);
}
</pre>
<p>Here is an example with a <code class="classname">Zend_Filter_Input</code>
                object.</p>
<pre class="programlisting">&lt;?php
require_once 'Zend/Filter/Input.php';
require_once 'Xyster/Validate/Errors.php';

$errors = new Xyster_Validate_Errors();
$filters = array(
    'month'   =&gt; 'Digits',
    'account' =&gt; 'StringTrim'
);
$validators = array(
    'account' =&gt; 'Alpha'
);

$input = new Zend_Filter_Input($filters, $validators, $values);

if ( $input-&gt;isValid() ) {
    // all inputs are valid
} else {
    // something is invalid; get messages
    $errors-&gt;addFilterInputMessages($input);
}
</pre>
<p>Using the notification pattern, you can pass a
                <code class="classname">Xyster_Validate_Errors</code> object to the
                layer of your application that performs the validation so the
                messages can find their way to the presentation layer.</p>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="xyster.validate.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="xyster.validate.html">Up</a></td>
<td width="40%" align="right"> </td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 11. Xyster_Validate </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> </td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
